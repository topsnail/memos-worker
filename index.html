<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åœ¨çº¿ç•™è¨€æ¿</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’¬</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- æ·»åŠ CryptoJSç”¨äºMD5è®¡ç®— -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'fb-blue': '#618ea5',
                        'fb-blue-dark': '#70887d',
                        'fb-bg': '#CCCCCC',
                        'fb-gray': '#65676B',
                        'fb-gray-light': '#E4E6EB',
                    }
                }
            }
        }
    </script>
    
    <!-- ====== è°ƒæ•´å¸ƒå±€çš„è§†è§‰ç§»æ¤CSS ====== -->
    <style>
        /* 1. åŠ¨æ€æ¸å˜èƒŒæ™¯ï¼ˆæ¢å¤åŠ¨ç”»æ•ˆæœï¼‰ */
        body {
            background: linear-gradient(-45deg, #4a6d7c, #8da383, #8a6a9c, #d18a66, #147a61);
            background-attachment: fixed;
            background-size: 400% 400%;
            min-height: 100vh;
            animation: gradientBG 20s ease infinite;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; opacity: 0.98; }
            50% { background-position: 100% 50%; opacity: 1; }
            100% { background-position: 0% 50%; opacity: 0.98; }
        }
        
        /* 2. è¡¨å•å’Œç•™è¨€åˆ—è¡¨å®¹å™¨æ ·å¼ï¼ˆç‹¬ç«‹å®¹å™¨ï¼‰ */
        .glass-container {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 16px;
            box-shadow: 
                0 12px 30px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.15) inset;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* 3. æ ‡é¢˜ç‹¬ç«‹æ ·å¼ï¼ˆä¸åŒ…å«åœ¨glass-containerä¸­ï¼‰ */
        .page-title {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 4. è¡¨å•å’Œåˆ—è¡¨å¡ç‰‡å†…éƒ¨æ ·å¼ */
        .bg-white {
            background: rgba(255, 255, 255, 0.85) !important;
        }
        
        /* 5. ç•™è¨€å¡ç‰‡èƒŒæ™¯æ›´é€æ˜ */
        .bg-fb-bg {
            background: rgba(240, 242, 245, 0.7) !important;
        }
        
        /* 6. è¾“å…¥æ¡†èƒŒæ™¯è½»å¾®é€æ˜ */
        .bg-fb-bg.focus\:bg-white {
            background: rgba(240, 242, 245, 0.8) !important;
        }
        
        /* 7. é˜´å½±ä¼˜åŒ– */
        .shadow-md {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08) !important;
        }
        
        /* 8. å¡ç‰‡æ‚¬åœæ•ˆæœå¢å¼ºé€æ˜åº¦ */
        .hover\:bg-gray-100:hover {
            background: rgba(243, 244, 246, 0.9) !important;
        }
        
        /* 9. ç¡®ä¿æ–‡æœ¬å¯è¯»æ€§ */
        .text-gray-900, .text-gray-700, .text-gray-800 {
            color: rgba(17, 24, 39, 0.9) !important;
        }
        
        /* 10. æŒ‰é’®é€æ˜åº¦ */
        .bg-fb-blue, .bg-green-50, .bg-red-50, .bg-yellow-50 {
            opacity: 0.95;
        }
        
        /* 11. å°å±å¹•è°ƒæ•´ - å¢å¼ºæ‰‹æœºç«¯é€‚é… */
        @media (max-width: 768px) {
            .glass-container {
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
                padding: 16px !important;
            }
            body {
                animation-duration: 30s;
                padding: 12px !important;
            }
            
            /* æ‰‹æœºç«¯è¾“å…¥æ¡†ä¼˜åŒ– */
            input, textarea {
                font-size: 16px !important; /* é˜²æ­¢iOSè‡ªåŠ¨ç¼©æ”¾ */
                max-width: 100% !important;
            }
            
            /* å›å¤è¡¨å•è¾“å…¥æ¡†è°ƒæ•´ä¸ºå‚ç›´å¸ƒå±€ - ä½¿ç”¨ç±»é€‰æ‹©å™¨ä¿®å¤ */
            .reply-form-container .flex {
                flex-direction: column !important;
                gap: 8px !important;
            }
            
            .reply-form-container input[type="email"] {
                width: 100% !important;
            }
            
            .reply-form-container button {
                width: 100% !important;
            }
            
            /* ç•™è¨€å¡ç‰‡å†…è¾¹è·è°ƒæ•´ */
            .bg-fb-bg {
                padding: 12px !important;
            }
            
            /* å¤´åƒå’Œå†…å®¹é—´è·è°ƒæ•´ */
            .flex.items-start.gap-3 {
                gap: 12px !important;
            }
            
            /* å›å¤åˆ—è¡¨å·¦è¾¹è·è°ƒæ•´ */
            .ml-13 {
                margin-left: 10px !important;
            }
        }
        
        /* 12. è¶…å°å±å¹•è¿›ä¸€æ­¥ä¼˜åŒ– */
        @media (max-width: 480px) {
            body {
                padding: 8px !important;
            }
            
            .glass-container {
                padding: 12px !important;
            }
            
            .header-text {
                font-size: 1.5rem !important;
            }
            
            .subheader-text {
                font-size: 0.875rem !important;
            }
            
            /* å›å¤è¡¨å•è¾“å…¥æ¡†åœ¨è¶…å°å±å¹•ä¸Šçš„ä¼˜åŒ– */
            .reply-form-container input,
            .reply-form-container textarea {
                padding: 10px !important;
            }
        }
        
        /* 13. å¤‡ç”¨æ–¹æ¡ˆï¼šä¸æ”¯æŒæ¯›ç»ç’ƒçš„æµè§ˆå™¨ */
        @supports not (backdrop-filter: blur(8px)) {
            .glass-container {
                background: rgba(255, 255, 255, 0.95) !important;
            }
            .bg-white {
                background: rgba(255, 255, 255, 0.98) !important;
            }
        }
        
        /* 14. æŠ—é”¯é½¿ä¼˜åŒ– */
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 15. é˜²æ­¢é•¿æ–‡æœ¬æº¢å‡º */
        .text-base {
            word-break: break-word;
            overflow-wrap: break-word;
        }
        
        /* 16. é‚®ç®±è¾“å…¥æ¡†ç‰¹åˆ«ä¼˜åŒ– */
        input[type="email"] {
            min-width: 0; /* å…è®¸ç¼©å° */
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-3">
    <!-- æ ‡é¢˜ç‹¬ç«‹åœ¨å®¹å™¨å¤– -->
    <div class="max-w-4xl mx-auto text-center mb-2 md:mb-2">
        <h1 class="page-title header-text text-2xl md:text-4xl font-bold text-white mb-2">
            åœ¨çº¿ç•™è¨€æ¿
        </h1>
        <p class="page-title subheader-text text-gray-600 text-sm md:text-base">åˆ†äº«ä½ çš„æƒ³æ³•å’Œåé¦ˆ</p>
    </div>
    
    <!-- ç•™è¨€è¡¨å•å®¹å™¨ï¼ˆç‹¬ç«‹ï¼‰ -->
    <div class="max-w-4xl mx-auto mb-6 md:mb-3">
        <div class="glass-container p-4 md:p-8">
            <div id="notification"></div>
            <form id="messageForm" class="space-y-4">
                <div>
                    <label for="content" class="block text-sm font-medium text-gray-500 mb-2">
                        ç•™è¨€å†…å®¹
                    </label>
                    <textarea
                        id="content"
                        name="content"
                        required
                        rows="4"
                        placeholder="åˆ†äº«ä½ çš„æƒ³æ³•..."
                        class="w-full px-3 py-2 border border-fb-gray-light rounded-lg bg-fb-bg focus:bg-white focus:outline-none focus:ring-2 focus:ring-fb-blue focus:border-transparent transition-all resize-none text-base"
                    ></textarea>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                        é‚®ç®±åœ°å€
                    </label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        placeholder="your@email.com"
                        class="w-full px-3 py-2 border border-fb-gray-light rounded-lg bg-fb-bg focus:bg-white focus:outline-none focus:ring-2 focus:ring-fb-blue focus:border-transparent transition-all text-base"
                    >
                </div>
                <button
                    type="submit"
                    class="w-full bg-fb-blue hover:bg-fb-blue-dark text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed text-base"
                >
                    å‘é€ç•™è¨€
                </button>
            </form>
        </div>
    </div>

    <!-- æ‰€æœ‰ç•™è¨€å®¹å™¨ï¼ˆç‹¬ç«‹ï¼‰ -->
    <div class="max-w-4xl mx-auto">
        <div class="glass-container p-4 md:p-8">
            <h2 class="text-xl md:text-xl font-bold text-gray-600 mb-2">
                æ‰€æœ‰ç•™è¨€
            </h2>
            <div id="messagesList">
                <div class="text-center text-fb-gray py-8">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = '/api';

        // åŠ è½½ç•™è¨€åˆ—è¡¨ï¼ˆåªåŠ è½½ä¸»ç•™è¨€ï¼Œparent_idä¸ºnullçš„ï¼‰
        async function loadMessages() {
            try {
                const response = await fetch(`${API_URL}/messages`);
                const data = await response.json();

                const messagesList = document.getElementById('messagesList');

                if (!data.messages || data.messages.length === 0) {
                    messagesList.innerHTML = '<div class="text-center text-fb-gray py-12 text-sm">æš‚æ— ç•™è¨€ï¼Œæˆä¸ºç¬¬ä¸€ä¸ªç•™è¨€çš„äººå§ï¼</div>';
                    return;
                }

                messagesList.innerHTML = data.messages.map(msg => `
                    <div class="bg-fb-bg rounded-lg p-3 md:p-4 mb-3 hover:bg-gray-100 transition-colors">
                        <div class="flex items-start gap-3 mb-2">
                            <!-- å¤´åƒ -->
                            <img 
                                src="${getGravatarUrl(msg.email, 40)}" 
                                alt="${escapeHtml(msg.email)}çš„å¤´åƒ"
                                class="w-10 h-10 rounded-full flex-shrink-0"
                                onerror="this.src='https://ui-avatars.com/api/?name=User&size=40&background=618ea5&color=fff&bold=true&length=1'"
                            >
                            <!-- å†…å®¹åŒºåŸŸ -->
                            <div class="flex-1 min-w-0"> <!-- æ·»åŠ  min-w-0 é˜²æ­¢å†…å®¹æº¢å‡º -->
                                <div class="text-gray-900 text-base leading-relaxed break-words">${escapeHtml(msg.content)}</div>
                                <div class="flex flex-wrap items-center gap-2 text-xs text-fb-gray mt-1">
                                    <span class="font-medium truncate max-w-[120px] md:max-w-none">${escapeHtml(msg.email)}</span>
                                    <span>Â·</span>
                                    <span>${formatDate(msg.created_at)}</span>
                                    <span>Â·</span>
                                    <button onclick="showReplyForm(${msg.id})" class="text-fb-blue hover:underline cursor-pointer whitespace-nowrap">
                                        å›å¤
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å›å¤è¡¨å•ï¼ˆé»˜è®¤éšè—ï¼‰ - æ·»åŠ å“åº”å¼å®¹å™¨ç±» -->
                        <div id="reply-form-${msg.id}" class="reply-form-container mt-3 hidden ml-10 md:ml-13">
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <input 
                                    type="text" 
                                    id="reply-content-${msg.id}"
                                    placeholder="è¾“å…¥å›å¤å†…å®¹..."
                                    class="flex-1 px-3 py-2 border border-fb-gray-light rounded-lg bg-fb-bg focus:outline-none focus:ring-1 focus:ring-fb-blue text-sm md:text-base"
                                >
                                <input 
                                    type="email" 
                                    id="reply-email-${msg.id}"
                                    placeholder="ä½ çš„é‚®ç®±"
                                    class="w-full md:w-40 px-3 py-2 border border-fb-gray-light rounded-lg bg-fb-bg focus:outline-none focus:ring-1 focus:ring-fb-blue text-sm md:text-base"
                                >
                                <button 
                                    onclick="submitReply(${msg.id})"
                                    class="bg-fb-blue hover:bg-fb-blue-dark text-white px-4 py-2 rounded-lg text-sm md:text-base whitespace-nowrap"
                                >
                                    å‘é€å›å¤
                                </button>
                            </div>
                        </div>
                        
                        <!-- å›å¤åˆ—è¡¨åŒºåŸŸ -->
                        <div id="replies-${msg.id}" class="mt-2 ml-10 md:ml-13 border-l-2 border-fb-gray-light pl-2 md:pl-3">
                            <!-- å›å¤å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                        </div>
                    </div>
                `).join('');

                // åŠ è½½æ¯æ¡ç•™è¨€çš„å›å¤
                data.messages.forEach(msg => {
                    loadReplies(msg.id);
                });
            } catch (error) {
                console.error('åŠ è½½ç•™è¨€å¤±è´¥:', error);
                document.getElementById('messagesList').innerHTML =
                    '<div class="bg-red-50 text-red-600 p-3 rounded-lg text-sm">åŠ è½½ç•™è¨€å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
            }
        }

        // åŠ è½½æŸæ¡ç•™è¨€çš„å›å¤
        async function loadReplies(messageId) {
            try {
                const response = await fetch(`${API_URL}/messages/${messageId}/replies`);
                if (!response.ok) return;
                
                const data = await response.json();
                const repliesContainer = document.getElementById(`replies-${messageId}`);
                
                if (!data.replies || data.replies.length === 0) {
                    repliesContainer.innerHTML = '';
                    return;
                }

                repliesContainer.innerHTML = data.replies.map(reply => `
                    <div class="mb-2 pb-2 border-b border-fb-gray-light last:border-0">
                        <div class="flex items-start gap-2 mb-1">
                            <!-- å›å¤å¤´åƒ -->
                            <img 
                                src="${getGravatarUrl(reply.email, 32)}" 
                                alt="${escapeHtml(reply.email)}çš„å¤´åƒ"
                                class="w-8 h-8 rounded-full flex-shrink-0"
                                onerror="this.src='https://ui-avatars.com/api/?name=User&size=32&background=618ea5&color=fff&bold=true&length=1'"
                            >
                            <!-- å›å¤å†…å®¹ -->
                            <div class="flex-1 min-w-0">
                                <div class="text-gray-800 text-sm break-words">${escapeHtml(reply.content)}</div>
                                <div class="flex flex-wrap items-center gap-2 text-xs text-fb-gray mt-1">
                                    ${reply.is_admin_reply ? '<span class="text-green-600 font-medium bg-green-50 px-1.5 py-0.5 rounded text-xs">ç®¡ç†å‘˜</span>' : ''}
                                    <span class="font-medium truncate max-w-[100px] md:max-w-none">${escapeHtml(reply.email)}</span>
                                    <span>Â·</span>
                                    <span>${formatDate(reply.created_at)}</span>
                                </div>
                            </div>             
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('åŠ è½½å›å¤å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤º/éšè—å›å¤è¡¨å•
        function showReplyForm(messageId) {
            const form = document.getElementById(`reply-form-${messageId}`);
            if (form.classList.contains('hidden')) {
                form.classList.remove('hidden');
                // æ‰‹æœºç«¯è‡ªåŠ¨èšç„¦åˆ°å†…å®¹è¾“å…¥æ¡†
                const contentInput = document.getElementById(`reply-content-${messageId}`);
                if (contentInput && window.innerWidth < 768) {
                    setTimeout(() => contentInput.focus(), 100);
                }
            } else {
                form.classList.add('hidden');
            }
        }

        // æäº¤å›å¤
        async function submitReply(messageId) {
            const content = document.getElementById(`reply-content-${messageId}`).value;
            const email = document.getElementById(`reply-email-${messageId}`).value;
            
            if (!content.trim() || !email.trim()) {
                alert('è¯·å¡«å†™å›å¤å†…å®¹å’Œé‚®ç®±');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/messages/${messageId}/replies`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ content, email })
                });

                const data = await response.json();

                if (response.ok) {
                    const data = await response.json();
                    
                    // æ¸…ç©ºè¡¨å•å¹¶éšè—
                    document.getElementById(`reply-content-${messageId}`).value = '';
                    document.getElementById(`reply-email-${messageId}`).value = '';
                    document.getElementById(`reply-form-${messageId}`).classList.add('hidden');
                    
                    // æ˜¾ç¤ºç›¸åº”çš„æç¤º
                    const notification = document.getElementById('notification');
                    
                    // ç§»é™¤å®¡æ ¸ç›¸å…³æç¤ºï¼Œç›´æ¥æ˜¾ç¤ºæˆåŠŸ
                    notification.innerHTML = '<div class="bg-green-50 text-green-700 p-3 rounded-lg mb-4 text-sm font-medium">å›å¤æˆåŠŸï¼</div>';
                    
                    // ç›´æ¥é‡æ–°åŠ è½½å›å¤åˆ—è¡¨
                    await loadReplies(messageId);
                    
                    setTimeout(() => {
                        notification.innerHTML = '';
                    }, 3000);
                } 
                else {
                    alert(data.error || 'å›å¤å¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            } catch (error) {
                console.error('å‘é€å›å¤å¤±è´¥:', error);
                alert('å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
            }
        }

        // æäº¤ç•™è¨€
        document.getElementById('messageForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const submitBtn = e.target.querySelector('button[type="submit"]');
            const notification = document.getElementById('notification');
            const content = document.getElementById('content').value;
            const email = document.getElementById('email').value;

            submitBtn.disabled = true;
            submitBtn.textContent = 'å‘é€ä¸­...';
            notification.innerHTML = '';

            try {
                const response = await fetch(`${API_URL}/messages`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ content, email })
                });

                const data = await response.json();

                if (response.ok) {
                    notification.innerHTML = '<div class="bg-green-50 text-green-700 p-3 rounded-lg mb-4 text-sm font-medium">ç•™è¨€å‘é€æˆåŠŸï¼</div>';
                    document.getElementById('messageForm').reset();
                    await loadMessages();
                    setTimeout(() => {
                        notification.innerHTML = '';
                    }, 3000);
                } else {
                    notification.innerHTML = `<div class="bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm font-medium">${data.error || 'å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•'}</div>`;
                }
            } catch (error) {
                console.error('å‘é€ç•™è¨€å¤±è´¥:', error);
                notification.innerHTML = '<div class="bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm font-medium">å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥</div>';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'å‘é€ç•™è¨€';
            }
        });

        // HTMLè½¬ä¹‰ï¼Œé˜²æ­¢XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateString) {
            // æ–¹æ³•3ï¼šæœ€ç®€å•çš„ä¿®å¤ - ç¡®ä¿æ ¼å¼è¢«æ­£ç¡®è¯†åˆ«
            // å°† "2025-12-31 07:42:06" è½¬ä¸º "2025-12-31T07:42:06Z"
            const isoString = dateString.replace(' ', 'T') + 'Z';
            const date = new Date(isoString);
            
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');

            return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        }

        // è‡ªåŠ¨ç”Ÿæˆå¤´åƒURL - åŸºäºé‚®ç®±è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€å¤´åƒ
        function getGravatarUrl(email, size = 40) {
            // æ¸…ç†é‚®ç®±ï¼Œè½¬ä¸ºå°å†™
            const trimmedEmail = email ? email.trim().toLowerCase() : '';
            
            // å¦‚æœæ²¡æœ‰é‚®ç®±æˆ–ä¸æ˜¯é‚®ç®±æ ¼å¼ï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ
            if (!trimmedEmail || !trimmedEmail.includes('@')) {
                return `https://ui-avatars.com/api/?name=User&size=${size}&background=618ea5&color=fff&bold=true&length=1`;
            }
            
            try {
                // è·å–é‚®ç®±ç”¨æˆ·åéƒ¨åˆ†ï¼ˆ@ä¹‹å‰ï¼‰
                const username = trimmedEmail.split('@')[0];
                // ä½¿ç”¨é‚®ç®±çš„MD5ç”Ÿæˆå”¯ä¸€é¢œè‰²
                const md5Hash = CryptoJS.MD5(trimmedEmail).toString();
                // å–MD5å‰6ä½ä½œä¸ºèƒŒæ™¯é¢œè‰²ï¼ˆç¡®ä¿é¢œè‰²ä¸ä¼šå¤ªæš—ï¼‰
                const bgColor = md5Hash.substring(0, 6);
                // ä½¿ç”¨UI AvatarsåŸºäºç”¨æˆ·åç”Ÿæˆå¤´åƒï¼ŒèƒŒæ™¯è‰²åŸºäºé‚®ç®±hash
                return `https://ui-avatars.com/api/?name=${encodeURIComponent(username)}&size=${size}&background=${bgColor}&color=fff&bold=true&length=1`;
            } catch (error) {
                console.error('ç”Ÿæˆå¤´åƒURLå¤±è´¥:', error);
                // å‡ºé”™æ—¶ä½¿ç”¨é»˜è®¤å¤´åƒ
                return `https://ui-avatars.com/api/?name=User&size=${size}&background=618ea5&color=fff&bold=true&length=1`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è·å–ç•™è¨€åˆ—è¡¨
        loadMessages();
    </script>
</body>
</html>
